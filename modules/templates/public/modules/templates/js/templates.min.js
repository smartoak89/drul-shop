var edit_modal=new UIkit.modal("#taracot-modal-edit"),current_id="",ckeditor,process_rows=[function(a,b){return a},function(a,b){return'<div style="text-align:center"><button class="uk-icon-button uk-icon-edit taracot-tableitem-edit" id="taracot-btnedt-'+b+'" type="button"></button></div>'}],load_edit_data=function(a){$.ajax({type:"POST",url:"/cp/templates/data/load",data:{id:a},dataType:"json",success:function(b){$("#taracot-modal-edit-loading").addClass("uk-hidden"),1==b.status?($("#taracot-modal-edit-wrap").removeClass("uk-hidden"),void 0!==typeof b.data&&$("#pvalue").val(void 0!==typeof b.data.pvalue?b.data.pvalue:""),$("#taracot-modal-edit-h1-edit").html(a.replace(/__/g,"/")+".html"),$("#pvalue").focus()):$("#taracot-modal-edit-loading-error").removeClass("uk-hidden")},error:function(){$("#taracot-modal-edit-loading").addClass("uk-hidden"),$("#taracot-modal-edit-loading-error").removeClass("uk-hidden")}})},edit_item=function(a){current_id=a,edit_modal.show(),$("#taracot-modal-edit-wrap > form.uk-form > fieldset > div.uk-form-row > input").removeClass("uk-form-danger"),$("#taracot-modal-edit-wrap > form.uk-form > fieldset > div.uk-form-row > input").val(""),$("#taracot-modal-edit-wrap").addClass("uk-hidden"),$("#taracot-modal-edit-loading").removeClass("uk-hidden"),$("#taracot-modal-edit-loading-error").addClass("uk-hidden"),load_edit_data(a)};$("#taracot-edit-btn-save").click(function(){$("#taracot-modal-edit-wrap > form.uk-form > fieldset > div.uk-form-row > input").removeClass("uk-form-danger"),$("#taracot-modal-edit-wrap").addClass("uk-hidden"),$("#taracot-modal-edit-loading").removeClass("uk-hidden"),$("#taracot-modal-edit-loading-error").addClass("uk-hidden"),$.ajax({type:"POST",url:"/cp/templates/data/save",data:{pvalue:$("#pvalue").val(),id:current_id},dataType:"json",success:function(a){if($("#taracot-modal-edit-loading").addClass("uk-hidden"),1==a.status)$("#taracot_table").medvedTable("update"),edit_modal.hide(),UIkit.notify({message:_lang_vars.save_success,status:"success",timeout:2e3,pos:"top-center"});else{$("#taracot-modal-edit-wrap").removeClass("uk-hidden");var b=_lang_vars.form_err_msg;if(a.error&&(b=a.error),a.err_fields&&a.err_fields.length)for(var c=!1,d=0;d<a.err_fields.length;d++)$("#"+a.err_fields[d]).addClass("uk-form-danger"),c||($("#"+a.err_fields[d]).focus(),c=!0);UIkit.notify({message:b,status:"danger",timeout:2e3,pos:"top-center"})}},error:function(){$("#taracot-modal-edit-loading").addClass("uk-hidden"),$("#taracot-modal-edit-wrap").removeClass("uk-hidden"),UIkit.notify({message:_lang_vars.form_err_msg,status:"danger",timeout:2e3,pos:"top-center"})}})}),$(document).ready(function(){$("#taracot_table").medvedTable({col_count:2,sort_mode:1,sort_cell:"template",taracot_table_url:"/cp/templates/data/list",process_rows:process_rows,error_message:_lang_vars.ajax_failed}),$("#taracot_table_filter").parent().hide(),init_ckeditor()});var init_ckeditor=function(){ckeditor=$("#pvalue").ckeditor({filebrowserBrowseUrl:"/cp/browse",filebrowserImageBrowseUrl:"/cp/browse?io=1",filebrowserWindowWidth:800,filebrowserWindowHeight:500,allowedContent:!0,fullPage:!0,autoParagraph:!1}).editor};