!function(a){function b(){document.getElementById("_taracot_loader_image").style.backgroundImage="url("+q+")",document.getElementById("_taracot_loader_image").style.width=m+"px",document.getElementById("_taracot_loader_image").style.height=n+"px",FPS=Math.round(100/l),v=1/FPS,u=setTimeout(c,v/1e3)}function c(){t+=p,s+=1,s>=o&&(t=0,s=0),document.getElementById("_taracot_loader_image")&&(document.getElementById("_taracot_loader_image").style.backgroundPosition=-t+"px 0"),u=setTimeout(c,1e3*v)}function d(a,b){clearTimeout(r),r=0,genImage=new Image,genImage.onload=function(){r=setTimeout(b,0)},genImage.src=a}function e(){var b=(a(window).height()-a("#_taracot_loader_image").outerHeight())/2,c=(a(window).width()-a("#_taracot_loader_image").outerWidth())/2;a("#_taracot_loader_image").css({position:"absolute",margin:0,top:(b>0?b:0)+"px",left:(c>0?c:0)+"px"})}function f(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1}function g(a){for(var b=x.length;b--;)if(a.keyCode===x[b])return void f(a)}function h(a){f(a)}function i(){window.addEventListener&&window.addEventListener("DOMMouseScroll",h,!1),window.onmousewheel=document.onmousewheel=h,document.onkeydown=g}function j(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",h,!1),window.onmousewheel=document.onmousewheel=document.onkeydown=null}var k=jQuery.extend({},k),l=9,m=100,n=100,o=12,p=100,q="/images/loading.png",r=!1,s=0,t=0,u=!1,v=0,w={init:function(c){a("body").append('<div id="_taracot_loader_image_wrap" style="position:fixed;top:0;left:0;background:rgba(0,0,0,0.6);z-index:999;width:100%;height:100%;display:none;"><div id="_taracot_loader_image"></div></div>'),new d(q,b),a(window).resize(e)},show:function(){e(),a("#_taracot_loader_image_wrap").show(),i()},hide:function(){a("#_taracot_loader_image_wrap").hide(),j()}};a.loadingIndicator=function(b){return w[b]?w[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" doesn't exists"):w.init.apply(this,arguments)};var x=[37,38,39,40]}(jQuery),!function(a){var b;window.UIkit&&(b=a(UIkit)),"function"==typeof define&&define.amd&&define("uikit-tooltip",["uikit"],function(){return b||a(UIkit)})}(function(a){"use strict";var b,c,d;return a.component("tooltip",{defaults:{offset:5,pos:"top",animation:!1,delay:0,cls:"",activeClass:"uk-active",src:function(a,b){return b=a.attr("title"),b&&a.data("cached-title",b).removeAttr("title"),a.data("cached-title")}},tip:"",boot:function(){a.$html.on("mouseenter.tooltip.uikit focus.tooltip.uikit","[data-uk-tooltip]",function(){var b=a.$(this);b.data("tooltip")||(a.tooltip(b,a.Utils.options(b.attr("data-uk-tooltip"))),b.trigger("mouseenter"))})},init:function(){var c=this;b||(b=a.$('<div class="uk-tooltip"></div>').appendTo("body")),this.on({focus:function(){c.show()},blur:function(){c.hide()},mouseenter:function(){c.show()},mouseleave:function(){c.hide()}})},show:function(){if(this.tip="function"==typeof this.options.src?this.options.src(this.element):this.options.src,c&&clearTimeout(c),d&&clearTimeout(d),this.tip.length){b.stop().css({top:-2e3,visibility:"hidden"}).removeClass(this.options.activeClass).show(),b.html('<div class="uk-tooltip-inner">'+this.tip+"</div>");var e=this,f=a.$.extend({},this.element.offset(),{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}),g=b[0].offsetWidth,h=b[0].offsetHeight,i="function"==typeof this.options.offset?this.options.offset.call(this.element):this.options.offset,j="function"==typeof this.options.pos?this.options.pos.call(this.element):this.options.pos,k=j.split("-"),l={display:"none",visibility:"visible",top:f.top+f.height+h,left:f.left};if("fixed"==a.$html.css("position")||"fixed"==a.$body.css("position")){var m=a.$("body").offset(),n=a.$("html").offset(),o={top:n.top+m.top,left:n.left+m.left};f.left-=o.left,f.top-=o.top}"left"!=k[0]&&"right"!=k[0]||"right"!=a.langdirection||(k[0]="left"==k[0]?"right":"left");var p={bottom:{top:f.top+f.height+i,left:f.left+f.width/2-g/2},top:{top:f.top-h-i,left:f.left+f.width/2-g/2},left:{top:f.top+f.height/2-h/2,left:f.left-g-i},right:{top:f.top+f.height/2-h/2,left:f.left+f.width+i}};a.$.extend(l,p[k[0]]),2==k.length&&(l.left="left"==k[1]?f.left:f.left+f.width-g);var q=this.checkBoundary(l.left,l.top,g,h);if(q){switch(q){case"x":j=2==k.length?k[0]+"-"+(l.left<0?"left":"right"):l.left<0?"right":"left";break;case"y":j=2==k.length?(l.top<0?"bottom":"top")+"-"+k[1]:l.top<0?"bottom":"top";break;case"xy":j=2==k.length?(l.top<0?"bottom":"top")+"-"+(l.left<0?"left":"right"):l.left<0?"right":"left"}k=j.split("-"),a.$.extend(l,p[k[0]]),2==k.length&&(l.left="left"==k[1]?f.left:f.left+f.width-g)}l.left-=a.$body.position().left,c=setTimeout(function(){b.css(l).attr("class",["uk-tooltip","uk-tooltip-"+j,e.options.cls].join(" ")),e.options.animation?b.css({opacity:0,display:"block"}).addClass(e.options.activeClass).animate({opacity:1},parseInt(e.options.animation,10)||400):b.show().addClass(e.options.activeClass),c=!1,d=setInterval(function(){e.element.is(":visible")||e.hide()},150)},parseInt(this.options.delay,10)||0)}},hide:function(){if(!this.element.is("input")||this.element[0]!==document.activeElement)if(c&&clearTimeout(c),d&&clearTimeout(d),b.stop(),this.options.animation){var a=this;b.fadeOut(parseInt(this.options.animation,10)||400,function(){b.removeClass(a.options.activeClass)})}else b.hide().removeClass(this.options.activeClass)},content:function(){return this.tip},checkBoundary:function(b,c,d,e){var f="";return(0>b||b-a.$win.scrollLeft()+d>window.innerWidth)&&(f+="x"),(0>c||c-a.$win.scrollTop()+e>window.innerHeight)&&(f+="y"),f}}),a.tooltip});var comment_parent="";$("#taracot_comment_form").is(":visible")||$(".taracot-comment-reply-link").hide(),$.loadingIndicator(),$("#btn_post_comment").click(function(){var a=$("#post_comment_text").val().replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ");return $("#post_comment_text").removeClass("uk-form-danger"),$(".taracot-post-comment-error").html(""),!a||a.length<2||a.length>2048?$("#post_comment_text").addClass("uk-form-danger"):($("#btn_post_comment").hide(),$("#btn_post_comment_loading").show(),void $.ajax({type:"POST",url:"/blog/post/comment",dataType:"json",data:{post_id:post_id,comment_parent:comment_parent,comment_text:a},success:function(a){if($("#btn_post_comment").show(),$("#btn_post_comment_loading").hide(),1==a.status){if($("#post_comment_text").val(""),comment_parent&&$("#comment_"+comment_parent).show(),$("#taracot_comment_form_wrap").show(),$("#taracot_comment_form").detach().appendTo($("#taracot_comment_form_wrap")),$("#comment_new").hide(),a.comment_html&&a.comment_id){if(comment_parent){var b="",c=!1;if($("#taracot_comments_flow > .taracot-comment").each(function(){if(!c){var d=$(this).attr("id").replace("taracot_comment_","");if(d==comment_parent)return b=$(this).css("margin-left");if($(this).css("margin-left")<=b){var e=parseInt(b.replace("px",""))+15;a.comment_html=a.comment_html.replace(/\[set_margin\]/,e),$(this).before(a.comment_html),c=!0}}}),!c){var d=parseInt(b.replace("px",""))+15;a.comment_html=a.comment_html.replace(/\[set_margin\]/,d),$("#taracot_comments_flow").append(a.comment_html)}}else $("#taracot_comments_flow").append(a.comment_html);$("html,body").animate({scrollTop:$("#taracot_comment_"+a.comment_id).offset().top-50},200,function(){$("#taracot_comment_"+a.comment_id).animate({opacity:0},100,function(){$("#taracot_comment_"+a.comment_id).animate({opacity:1},300)})}),$("#btn_post_comment").hover(),$("#post_comment_text").hover()}comment_parent="",$(".taracot-comment-reply-link").unbind(),$(".taracot-comment-reply-link").click(taracot_comment_reply_link_handler)}else{var e=_lang_vars.ajax_failed;a.error&&(e=a.error),$(".taracot-post-comment-error").html(e),$("#post_comment_text").focus()}},error:function(){$("#btn_post_comment").show(),$("#btn_post_comment_loading").hide(),$(".taracot-post-comment-error").html(_lang_vars.ajax_failed),$("#post_comment_text").focus()}}))});var taracot_comment_reply_link_handler=function(){var a=$(this).attr("id").replace("comment_","");$("#taracot_comment_form").detach().appendTo($("#comment_"+a).parent()),comment_parent&&$("#comment_"+comment_parent).show(),$("#comment_"+a).hide(),comment_parent=a,$("#post_comment_text").removeClass("uk-form-danger"),$("#post_comment_text").val(""),$("#post_comment_text").focus(),$("#comment_new").show(),$("#taracot_comment_form_wrap").hide()};$(".taracot-comment-new-link").click(function(){comment_parent&&$("#comment_"+comment_parent).show(),$("#taracot_comment_form_wrap").show(),$("#taracot_comment_form").detach().appendTo($("#taracot_comment_form_wrap")),$("#comment_new").hide(),comment_parent=""});var taracot_comment_delete_handler=function(){if(confirm(_lang_vars.comment_delete_confirm)){var a=$(this).attr("id").replace("comment_delete_","");$.loadingIndicator("show"),$.ajax({type:"POST",url:"/blog/post/comment/delete",dataType:"json",data:{comment_id:a},success:function(b){if($.loadingIndicator("hide"),1==b.status)$("#taracot_comment_"+a).html(_lang_vars.comment_deleted),$("#taracot_comment_"+a).addClass("taracot-comment-deleted");else{if(b.error)return alert(b.error);alert(_lang_vars.ajax_failed)}},error:function(){$.loadingIndicator("hide"),alert(_lang_vars.ajax_failed)}})}};$(".taracot-comment-reply-link").click(taracot_comment_reply_link_handler),$(".taracot-comment-delete").click(taracot_comment_delete_handler),$("#post_comment_text").keydown(function(a){a.ctrlKey&&13==a.keyCode&&(a.preventDefault(),$("#btn_post_comment").click())});