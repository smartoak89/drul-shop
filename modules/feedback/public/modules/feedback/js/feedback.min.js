function submitOnEnter(a){var b;if(window.event)b=window.event.keyCode;else{if(!a)return!1;b=a.keyCode?a.keyCode:a.which}return 13==b&&(!window.previousKeyCode||33!=window.previousKeyCode&&34!=window.previousKeyCode&&39!=window.previousKeyCode&&40!=window.previousKeyCode)?!0:(window.previousKeyCode=b,!1)}!function(a){a.queryString=function(a){if(""===a)return{};for(var b={},c=0;c<a.length;++c){var d=a[c].split("=");2==d.length&&(b[d[0]]=decodeURIComponent(d[1].replace(/\+/g," ")))}return b}(window.location.search.substr(1).split("&"))}(jQuery),!function(a){var b;window.UIkit&&(b=a(UIkit)),"function"==typeof define&&define.amd&&define("uikit-tooltip",["uikit"],function(){return b||a(UIkit)})}(function(a){"use strict";var b,c,d;return a.component("tooltip",{defaults:{offset:5,pos:"top",animation:!1,delay:0,cls:"",activeClass:"uk-active",src:function(a,b){return b=a.attr("title"),b&&a.data("cached-title",b).removeAttr("title"),a.data("cached-title")}},tip:"",boot:function(){a.$html.on("mouseenter.tooltip.uikit focus.tooltip.uikit","[data-uk-tooltip]",function(){var b=a.$(this);b.data("tooltip")||(a.tooltip(b,a.Utils.options(b.attr("data-uk-tooltip"))),b.trigger("mouseenter"))})},init:function(){var c=this;b||(b=a.$('<div class="uk-tooltip"></div>').appendTo("body")),this.on({focus:function(){c.show()},blur:function(){c.hide()},mouseenter:function(){c.show()},mouseleave:function(){c.hide()}})},show:function(){if(this.tip="function"==typeof this.options.src?this.options.src(this.element):this.options.src,c&&clearTimeout(c),d&&clearTimeout(d),this.tip.length){b.stop().css({top:-2e3,visibility:"hidden"}).removeClass(this.options.activeClass).show(),b.html('<div class="uk-tooltip-inner">'+this.tip+"</div>");var e=this,f=a.$.extend({},this.element.offset(),{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}),g=b[0].offsetWidth,h=b[0].offsetHeight,i="function"==typeof this.options.offset?this.options.offset.call(this.element):this.options.offset,j="function"==typeof this.options.pos?this.options.pos.call(this.element):this.options.pos,k=j.split("-"),l={display:"none",visibility:"visible",top:f.top+f.height+h,left:f.left};if("fixed"==a.$html.css("position")||"fixed"==a.$body.css("position")){var m=a.$("body").offset(),n=a.$("html").offset(),o={top:n.top+m.top,left:n.left+m.left};f.left-=o.left,f.top-=o.top}"left"!=k[0]&&"right"!=k[0]||"right"!=a.langdirection||(k[0]="left"==k[0]?"right":"left");var p={bottom:{top:f.top+f.height+i,left:f.left+f.width/2-g/2},top:{top:f.top-h-i,left:f.left+f.width/2-g/2},left:{top:f.top+f.height/2-h/2,left:f.left-g-i},right:{top:f.top+f.height/2-h/2,left:f.left+f.width+i}};a.$.extend(l,p[k[0]]),2==k.length&&(l.left="left"==k[1]?f.left:f.left+f.width-g);var q=this.checkBoundary(l.left,l.top,g,h);if(q){switch(q){case"x":j=2==k.length?k[0]+"-"+(l.left<0?"left":"right"):l.left<0?"right":"left";break;case"y":j=2==k.length?(l.top<0?"bottom":"top")+"-"+k[1]:l.top<0?"bottom":"top";break;case"xy":j=2==k.length?(l.top<0?"bottom":"top")+"-"+(l.left<0?"left":"right"):l.left<0?"right":"left"}k=j.split("-"),a.$.extend(l,p[k[0]]),2==k.length&&(l.left="left"==k[1]?f.left:f.left+f.width-g)}l.left-=a.$body.position().left,c=setTimeout(function(){b.css(l).attr("class",["uk-tooltip","uk-tooltip-"+j,e.options.cls].join(" ")),e.options.animation?b.css({opacity:0,display:"block"}).addClass(e.options.activeClass).animate({opacity:1},parseInt(e.options.animation,10)||400):b.show().addClass(e.options.activeClass),c=!1,d=setInterval(function(){e.element.is(":visible")||e.hide()},150)},parseInt(this.options.delay,10)||0)}},hide:function(){if(!this.element.is("input")||this.element[0]!==document.activeElement)if(c&&clearTimeout(c),d&&clearTimeout(d),b.stop(),this.options.animation){var a=this;b.fadeOut(parseInt(this.options.animation,10)||400,function(){b.removeClass(a.options.activeClass)})}else b.hide().removeClass(this.options.activeClass)},content:function(){return this.tip},checkBoundary:function(b,c,d,e){var f="";return(0>b||b-a.$win.scrollLeft()+d>window.innerWidth)&&(f+="x"),(0>c||c-a.$win.scrollTop()+e>window.innerHeight)&&(f+="y"),f}}),a.tooltip});var captcha_loading=!1,feedback_load_captcha=function(){return $("#taracot_feedback_captcha").val(""),"undefined"!=typeof captcha_type&&"png"==captcha_type?void $("#taracot-feedback-captcha").attr("src","/auth/captcha?rnd="+Math.random().toString().replace(".","")):void(captcha_loading||(captcha_loading=!0,$.ajax({type:"POST",url:"/auth/captcha",data:{},dataType:"json",success:function(a){captcha_loading=!1,a.img?$("#taracot-feedback-captcha").attr("src","data:image/jpeg;base64,"+a.img):($("#taracot-feedback-error").html(feedback_lang_vars.ajax_failed),$("#taracot-feedback-error").show())},error:function(){$("#taracot-feedback-error").html(feedback_lang_vars.ajax_failed),$("#taracot-feedback-error").show(),captcha_loading=!1}})))};$("#taracot-feedback-captcha").click(feedback_load_captcha),$("#feedback_btn_send_message").click(function(){$("#taracot-feedback-error").hide(),$(".taracot-feedback-field").removeClass("uk-form-danger");for(var a=[],b=0;b<feedback_form_data.length;b++){var c=$("#taracot_feedback_"+feedback_form_data[b].id).val();if(c&&(c=c.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")),feedback_form_data[b].mandatory&&!c)return $("#taracot_feedback_"+feedback_form_data[b].id).focus(),$("#taracot_feedback_"+feedback_form_data[b].id).addClass("uk-form-danger"),$("#taracot-feedback-error").html(feedback_lang_vars.mandatory_field_empty+": "+feedback_form_data[b]["label_"+feedback_current_lang]),void $("#taracot-feedback-error").show();if("email"==feedback_form_data[b].type&&c&&!c.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/))return $("#taracot_feedback_"+feedback_form_data[b].id).focus(),$("#taracot_feedback_"+feedback_form_data[b].id).addClass("uk-form-danger"),$("#taracot-feedback-error").html(feedback_lang_vars.invalid_email+": "+feedback_form_data[b]["label_"+feedback_current_lang]),void $("#taracot-feedback-error").show();a.push({id:feedback_form_data[b].id,val:c})}var d=$("#taracot_feedback_captcha").val();return d&&(d=d.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")),d&&d.match(/^[0-9]{4}$/)?($("#feedback_btn_send_message_normal").hide(),$("#feedback_btn_send_message_loading").show(),$("#feedback_btn_send_message").attr("disabled",!0),void $.ajax({type:"POST",url:"/feedback/send",data:{fields:a,captcha:d,form_data:feedback_form_data,form_checksum:feedback_form_checksum},dataType:"json",success:function(a){a&&("1"==a.result?($("#taracot_feedback_form").hide(),$("#taracot-feedback-success").show()):($(".taracot-feedback-field").first().focus(),$("#taracot-feedback-error").html(feedback_lang_vars.ajax_failed),a.error&&$("#taracot-feedback-error").html(a.error),a.field&&($("#taracot_feedback_"+a.field).addClass("uk-form-danger"),$("#taracot_feedback_"+a.field).focus()),$("#taracot-feedback-error").show(),feedback_load_captcha()))},error:function(){$(".taracot-feedback-field").first().focus(),$("#taracot-feedback-error").html(feedback_lang_vars.ajax_failed),$("#taracot-feedback-error").show(),feedback_load_captcha()},complete:function(){$("#feedback_btn_send_message_normal").show(),$("#feedback_btn_send_message_loading").hide(),$("#feedback_btn_send_message").attr("disabled",!1)}})):($("#taracot_feedback_captcha").focus(),$("#taracot_feedback_captcha").addClass("uk-form-danger"),$("#taracot-feedback-error").html(feedback_lang_vars.invalid_captcha),void $("#taracot-feedback-error").show())}),$(".taracot-feedback-field").bind("keypress",function(a){submitOnEnter(a)&&($("#feedback_btn_send_message").click(),a.preventDefault())}),$(document).ready(function(){feedback_load_captcha(),$(".taracot-feedback-field").first().focus()});