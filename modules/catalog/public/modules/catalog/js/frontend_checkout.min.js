!function(a){var b;window.UIkit&&(b=a(UIkit)),"function"==typeof define&&define.amd&&define("uikit-tooltip",["uikit"],function(){return b||a(UIkit)})}(function(a){"use strict";var b,c,d;return a.component("tooltip",{defaults:{offset:5,pos:"top",animation:!1,delay:0,cls:"",activeClass:"uk-active",src:function(a,b){return b=a.attr("title"),b&&a.data("cached-title",b).removeAttr("title"),a.data("cached-title")}},tip:"",boot:function(){a.$html.on("mouseenter.tooltip.uikit focus.tooltip.uikit","[data-uk-tooltip]",function(){var b=a.$(this);b.data("tooltip")||(a.tooltip(b,a.Utils.options(b.attr("data-uk-tooltip"))),b.trigger("mouseenter"))})},init:function(){var c=this;b||(b=a.$('<div class="uk-tooltip"></div>').appendTo("body")),this.on({focus:function(){c.show()},blur:function(){c.hide()},mouseenter:function(){c.show()},mouseleave:function(){c.hide()}})},show:function(){if(this.tip="function"==typeof this.options.src?this.options.src(this.element):this.options.src,c&&clearTimeout(c),d&&clearTimeout(d),this.tip.length){b.stop().css({top:-2e3,visibility:"hidden"}).removeClass(this.options.activeClass).show(),b.html('<div class="uk-tooltip-inner">'+this.tip+"</div>");var e=this,f=a.$.extend({},this.element.offset(),{width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}),g=b[0].offsetWidth,h=b[0].offsetHeight,i="function"==typeof this.options.offset?this.options.offset.call(this.element):this.options.offset,j="function"==typeof this.options.pos?this.options.pos.call(this.element):this.options.pos,k=j.split("-"),l={display:"none",visibility:"visible",top:f.top+f.height+h,left:f.left};if("fixed"==a.$html.css("position")||"fixed"==a.$body.css("position")){var m=a.$("body").offset(),n=a.$("html").offset(),o={top:n.top+m.top,left:n.left+m.left};f.left-=o.left,f.top-=o.top}"left"!=k[0]&&"right"!=k[0]||"right"!=a.langdirection||(k[0]="left"==k[0]?"right":"left");var p={bottom:{top:f.top+f.height+i,left:f.left+f.width/2-g/2},top:{top:f.top-h-i,left:f.left+f.width/2-g/2},left:{top:f.top+f.height/2-h/2,left:f.left-g-i},right:{top:f.top+f.height/2-h/2,left:f.left+f.width+i}};a.$.extend(l,p[k[0]]),2==k.length&&(l.left="left"==k[1]?f.left:f.left+f.width-g);var q=this.checkBoundary(l.left,l.top,g,h);if(q){switch(q){case"x":j=2==k.length?k[0]+"-"+(l.left<0?"left":"right"):l.left<0?"right":"left";break;case"y":j=2==k.length?(l.top<0?"bottom":"top")+"-"+k[1]:l.top<0?"bottom":"top";break;case"xy":j=2==k.length?(l.top<0?"bottom":"top")+"-"+(l.left<0?"left":"right"):l.left<0?"right":"left"}k=j.split("-"),a.$.extend(l,p[k[0]]),2==k.length&&(l.left="left"==k[1]?f.left:f.left+f.width-g)}l.left-=a.$body.position().left,c=setTimeout(function(){b.css(l).attr("class",["uk-tooltip","uk-tooltip-"+j,e.options.cls].join(" ")),e.options.animation?b.css({opacity:0,display:"block"}).addClass(e.options.activeClass).animate({opacity:1},parseInt(e.options.animation,10)||400):b.show().addClass(e.options.activeClass),c=!1,d=setInterval(function(){e.element.is(":visible")||e.hide()},150)},parseInt(this.options.delay,10)||0)}},hide:function(){if(!this.element.is("input")||this.element[0]!==document.activeElement)if(c&&clearTimeout(c),d&&clearTimeout(d),b.stop(),this.options.animation){var a=this;b.fadeOut(parseInt(this.options.animation,10)||400,function(){b.removeClass(a.options.activeClass)})}else b.hide().removeClass(this.options.activeClass)},content:function(){return this.tip},checkBoundary:function(b,c,d,e){var f="";return(0>b||b-a.$win.scrollLeft()+d>window.innerWidth)&&(f+="x"),(0>c||c-a.$win.scrollTop()+e>window.innerHeight)&&(f+="y"),f}}),a.tooltip});var _catalog_addr_required=!1,placed_order_id_hex,placed_order_id_num,catalog_checkout_ship_method_handler=function(){for(var a=0;a<_taracot_catalog_ship_methods.length;a++)if(_taracot_catalog_ship_methods[a].id==$("#catalog_checkout_ship_method").val()){_taracot_catalog_ship_methods[a].id.match(/_noaddr$/i)?($("#taracot_checkout_ship_address").hide(),_catalog_addr_required=!1):($("#taracot_checkout_ship_address").show(),_catalog_addr_required=!0);var b=_taracot_catalog_ship_methods[a].amnt,c=_taracot_catalog_ship_methods[a].weight,d=_taracot_catalog_ship_methods[a].price;c>0&&_taracot_catalog_total_weight>0&&(d*=Math.ceil(_taracot_catalog_total_weight/c)),b>0&&(d*=Math.ceil(_taracot_catalog_total_amount/b)),$("#taracot_catalog_cart_total_shipment").html(d);var e=parseFloat(parseFloat(d)+parseFloat(_taracot_catalog_subtotal));$("#taracot_catalog_cart_total_sum").html(e)}},taracot_catalog_checkout_btn_checkout_handler=function(){$("#taracot_catalog_addr_error").hide(),$(".taracot-catalog-addr-field").removeClass("uk-form-danger");var a=$("#catalog_checkout_ship_method").val(),b=$.trim($("#catalog_checkout_ship_name").val()),c=$.trim($("#catalog_checkout_ship_street").val()),d=$.trim($("#catalog_checkout_ship_city").val()),e=$.trim($("#catalog_checkout_ship_region").val()),f=$("#catalog_checkout_ship_country").val(),g=$.trim($("#catalog_checkout_ship_zip").val()),h=$("#catalog_checkout_ship_phone").val().replace(/[^0-9\+]+/g,""),i=$.trim($("#catalog_checkout_ship_comment").val()),j=[];if(_catalog_addr_required&&((!b||!b.length||b.length>80)&&j.push("#catalog_checkout_ship_name"),(!c||!c.length||c.length>120)&&j.push("#catalog_checkout_ship_street"),(!d||!d.length||d.length>120)&&j.push("#catalog_checkout_ship_city"),(!e||!e.length||e.length>120)&&j.push("#catalog_checkout_ship_region"),f&&f.match(/^[A-Z]{2}$/)||j.push("#catalog_checkout_ship_country"),g&&g.match(/^[0-9]{5,6}$/)||j.push("#catalog_checkout_ship_zip"),h&&h.match(/^[0-9\+]{1,40}$/)||j.push("#catalog_checkout_ship_phone"),i&&i.length>1024&&j.push("#catalog_checkout_ship_comment"),j.length)){for(var k=0;k<j.length;k++)$(j[k]).addClass("uk-form-danger"),0===k&&$(j[k]).focus();return $("#taracot_catalog_addr_error").show(),void $("html,body").animate({scrollTop:$("#taracot_catalog_addr_error").offset().top},"slow")}$(".taracot-catalog-checkout-ajax").show(),$(".taracot-catalog-checkout-btn-checkout").attr("disabled",!0),$("#taracot_catalog_checkout_error").hide(),$.ajax({type:"POST",url:"/catalog/ajax/checkout",dataType:"json",data:{ship_method:a,ship_name:b,ship_street:c,ship_city:d,ship_region:e,ship_country:f,ship_zip:g,ship_phone:h,ship_comment:i,subtotal_cost:$("#taracot_catalog_cart_subtotal").html()},success:function(a){a?"1"==a.status?(a.order_id&&($(".taracot-catalog-success-order-id").html(a.order_id),placed_order_id_num=a.order_id),a.order_id_hex&&(placed_order_id_hex=a.order_id_hex),$("#taracot_catalog_checkout_div").hide(),$("#taracot_catalog_checkout_success_div").fadeIn(300)):($("#taracot_catalog_checkout_error").html(_lang_vars.ajax_failed),a.error&&$("#taracot_catalog_checkout_error").html(a.error),a.stop&&$(".taracot-catalog-checkout-btn-checkout").hide(),$("#taracot_catalog_checkout_error").show(),$("html,body").animate({scrollTop:$("#taracot_catalog_checkout_error").offset().top},"slow")):($("#taracot_catalog_checkout_error").html(_lang_vars.ajax_failed),$("#taracot_catalog_checkout_error").show(),$("html,body").animate({scrollTop:$("#taracot_catalog_checkout_error").offset().top},"slow"))},error:function(){$("#taracot_catalog_checkout_error").html(_lang_vars.ajax_failed),$("#taracot_catalog_checkout_error").show(),$("html,body").animate({scrollTop:$("#taracot_catalog_checkout_error").offset().top},"slow")},complete:function(){$(".taracot-catalog-checkout-ajax").hide(),$(".taracot-catalog-checkout-btn-checkout").attr("disabled",!1),$("html,body").animate({scrollTop:$("#taracot_catalog_checkout_error").offset().top},"slow")}})},taracot_catalog_checkout_btn_orders_handler=function(){location.href="/catalog/orders?mode=view&order_id="+placed_order_id_hex},taracot_catalog_checkout_btn_pay_handler=function(){placed_order_id_num&&(location.href="/catalog/api/payment/invoice/"+placed_order_id_num+"?rnd="+Math.random().toString().replace(".",""))};$(document).ready(function(){if($(".taracot-catalog-addr-field").val(""),$(".taracot-catalog-addr-field")[0].selectedIndex=0,$("#taracot_catalog_checkout_wrap").show(),$("#taracot_catalog_checkout_empty").hide(),$(".taracot-catalog-checkout-btn-checkout").show(),$("#catalog_checkout_ship_method").change(catalog_checkout_ship_method_handler),$(".taracot-catalog-checkout-btn-pay").click(taracot_catalog_checkout_btn_pay_handler),_taracot_payment_enabled||$(".taracot-catalog-checkout-btn-pay").hide(),catalog_checkout_ship_method_handler(),navigator.language){var a=navigator.language;navigator.language.length>2&&(a=navigator.language.slice(-2)),$("#catalog_checkout_ship_country").val(a)}$(".taracot-catalog-checkout-btn-checkout").attr("disabled",!1),_taracot_catalog_missing_items.length&&$(".taracot-catalog-checkout-btn-checkout").attr("disabled",!0),$(".taracot-catalog-checkout-btn-checkout").click(taracot_catalog_checkout_btn_checkout_handler),$(".taracot-catalog-checkout-btn-orders").click(taracot_catalog_checkout_btn_orders_handler),$(".taracot-catalog-checkout-btn-back").click(function(){var a=_taracot_catalog_init_path||"/";location.href="/catalog/cart?cat="+a+"&find="+(_taracot_catalog_init_find||"")+"&sort="+(_taracot_catalog_init_sort||"t")+"&show_all="+(_taracot_catalog_init_view||1)+"&page="+(_taracot_catalog_init_page||1)+"&rnd="+parseInt(9e5*Math.random()+1e3)}),$(".taracot-catalog-checkout-btn-finish").click(function(){location.href="/catalog?rnd="+parseInt(9e5*Math.random()+1e3)}),_taracot_catalog_shipping_address.ship_name&&$("#catalog_checkout_ship_name").val(_taracot_catalog_shipping_address.ship_name),_taracot_catalog_shipping_address.ship_street&&$("#catalog_checkout_ship_street").val(_taracot_catalog_shipping_address.ship_street),_taracot_catalog_shipping_address.ship_city&&$("#catalog_checkout_ship_city").val(_taracot_catalog_shipping_address.ship_city),_taracot_catalog_shipping_address.ship_region&&$("#catalog_checkout_ship_region").val(_taracot_catalog_shipping_address.ship_region),_taracot_catalog_shipping_address.ship_country&&$("#catalog_checkout_ship_country").val(_taracot_catalog_shipping_address.ship_country),_taracot_catalog_shipping_address.ship_zip&&$("#catalog_checkout_ship_zip").val(_taracot_catalog_shipping_address.ship_zip),_taracot_catalog_shipping_address.ship_phone&&$("#catalog_checkout_ship_phone").val(_taracot_catalog_shipping_address.ship_phone)});